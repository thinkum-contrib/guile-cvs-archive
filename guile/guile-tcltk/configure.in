dnl Process this file with autoconf to produce a configure script.

AC_INIT(guile-tcl.c)
AM_INIT_GUILE_MODULE(gtcltk-lib)

dnl Checks for programs.
AC_PROG_CC
AC_PROG_CPP
AC_PROG_RANLIB

dnl Checks for libraries.
AC_PATH_XTRA

### On some systems, the Tcl library contains references to
### functions in the dynamic linker library, -ldl, so we may need
### to include that.
AC_CHECK_LIB(dl, dlopen, DL_LIBS='-ldl', DL_LIBS='')

### Use gtcltk-lib only if we seem to have Tcl installed on the
### system.  We really should check for Tk as well, but that involves
### finding all the X libraries that we need to do a complete link.
AC_CHECK_LIB(tcl7.5, Tcl_CreateInterp, GTCLTK=libgtcltk.a, GTCLTK=, -lm)
AC_SUBST(GTCLTK)

dnl Checks for library functions.
AC_FUNC_ALLOCA
AC_SUBST(DL_LIBS)
AC_OUTPUT(Makefile PLUGIN/Makefile)
